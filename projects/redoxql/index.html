<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>RedoxQL &#183; Jake Roggenbuck</title><meta name=title content="RedoxQL &#183; Jake Roggenbuck"><meta name=description content="ðŸ¦€ RedoxQL is an L-Store database written in Rust and Python ðŸš€ and ðŸ¥‡ Fastest database speed in the class for milestone 2 (ECS165A Winter 2025) âš¡"><meta name=keywords content="Rust,"><link rel=canonical href=/projects/redoxql/><link type=text/css rel=stylesheet href=/css/main.bundle.min.4d4b1b35ed4fb37d198f5f4fa732e64404b535101cdef4401ac22e7c91380b82f3c8e5d51ae61f0149e6a95694c77e5a40943ca8480609a230c10f33c1fc11b4.css integrity="sha512-TUsbNe1Ps30Zj19PpzLmRAS1NRAc3vRAGsIufJE4C4LzyOXVGuYfAUnmqVaUx35aQJQ8qEgGCaIwwQ8zwfwRtA=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.006a5ac4ddc20468d3cbac5f715178db0c4e87ec9673e6f6bc123ea9d5b9368c9c5323358b3f6eb419028d87c3c45a8d704eedbee9458cc2d0596554a058d611.js integrity="sha512-AGpaxN3CBGjTy6xfcVF42wxOh+yWc+b2vBI+qdW5NoycUyM1iz9utBkCjYfDxFqNcE7tvulFjMLQWWVUoFjWEQ==" data-copy data-copied></script>
<script src=/js/zoom.min.js></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="RedoxQL"><meta property="og:description" content="ðŸ¦€ RedoxQL is an L-Store database written in Rust and Python ðŸš€ and ðŸ¥‡ Fastest database speed in the class for milestone 2 (ECS165A Winter 2025) âš¡"><meta property="og:type" content="article"><meta property="og:url" content="/projects/redoxql/"><meta property="article:section" content="projects"><meta property="article:published_time" content="2025-01-13T00:00:00+00:00"><meta property="article:modified_time" content="2025-01-13T00:00:00+00:00"><meta property="og:site_name" content="Jake Roggenbuck"><meta name=twitter:card content="summary"><meta name=twitter:title content="RedoxQL"><meta name=twitter:description content="ðŸ¦€ RedoxQL is an L-Store database written in Rust and Python ðŸš€ and ðŸ¥‡ Fastest database speed in the class for milestone 2 (ECS165A Winter 2025) âš¡"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Projects","name":"RedoxQL","headline":"RedoxQL","description":"ðŸ¦€ RedoxQL is an L-Store database written in Rust and Python ðŸš€ and ðŸ¥‡ Fastest database speed in the class for milestone 2 (ECS165A Winter 2025) âš¡","abstract":"ðŸ¦€ RedoxQL is an L-Store database written in Rust and Python ðŸš€","inLanguage":"en","url":"\/projects\/redoxql\/","author":{"@type":"Person","name":"Jake Roggenbuck"},"copyrightYear":"2025","dateCreated":"2025-01-13T00:00:00\u002b00:00","datePublished":"2025-01-13T00:00:00\u002b00:00","dateModified":"2025-01-13T00:00:00\u002b00:00","keywords":["Rust"],"mainEntityOfPage":"true","wordCount":"1739"}]</script><meta name=author content="Jake Roggenbuck"><link href=mailto:me@jr0.org rel=me><link href=https://github.com/jakeroggenbuck rel=me><link href=https://linkedin.com/in/jakeroggenbuck rel=me><script src=/lib/jquery/jquery.slim.min.js integrity></script><meta name=theme-color><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css integrity=sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js integrity=sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})})</script><script>!function(e,t){var n,s,o,i;t.__SV||(window.posthog=t,t._i=[],t.init=function(a,r,c){function d(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}(s=e.createElement("script")).type="text/javascript",s.async=!0,s.src=r.api_host+"/static/array.js",(i=e.getElementsByTagName("script")[0]).parentNode.insertBefore(s,i);var l=t;for(void 0!==c?l=t[c]=[]:c="posthog",l.people=l.people||[],l.toString=function(e){var t="posthog";return"posthog"!==c&&(t+="."+c),e||(t+=" (stub)"),t},l.people.toString=function(){return l.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags".split(" "),n=0;n<o.length;n++)d(l,o[n]);t._i.push([a,r,c])},t.__SV=1)}(document,window.posthog||[]),posthog.init("phc_ML7OV6jGM1EXu0tXlV5CUqJgBSduSsgx8U2HaLEiIX",{api_host:"https://app.posthog.com"})</script></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">Jake Roggenbuck</a></nav><nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12"><a href=/projects/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title=Projects>Projects</p></a><a href=/posts/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title=Posts>Blog</p></a><a href=/archive/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title=Archive>Archive</p></a><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400 h-12" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="ltr:mr-14 rtl:ml-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"><button id=appearance-switcher aria-label="Dark mode switcher" type=button><div class="flex items-center justify-center h-12 dark:hidden"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden h-12 dark:flex"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav><div class="flex md:hidden items-center space-x-5 md:ml-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button>
<button id=appearance-switcher-mobile aria-label="Dark mode switcher" type=button style=margin-right:5px><div class="flex items-center justify-center h-12 dark:hidden"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden h-12 dark:flex"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button for=menu-controller class=block><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/projects/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=Projects>Projects</p></a></li><li class=mt-1><a href=/posts/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=Posts>Blog</p></a></li><li class=mt-1><a href=/archive/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=Archive>Archive</p></a></li></ul></div></label></div></div><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header id=single_header class="mt-5 max-w-prose"><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/></a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/projects/>Projects</a><span class="px-1 text-primary-500">/</span></li><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/projects/redoxql/>RedoxQL</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">RedoxQL</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2025-01-13 00:00:00 +0000 UTC">13 January 2025</time><span class="px-2 text-primary-500">&#183;</span><span>1739 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">9 mins</span></div></div><div class=flex><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 alt="Jake Roggenbuck" src=/jake-profile-2_hu5c441416fff170c71d20e1ff858469cd_88398_192x192_fill_q75_box_center.jpg><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Jake Roggenbuck</div><div class="text-sm text-neutral-700 dark:text-neutral-400">Working at Capital One as a SWE Intern and Conducting Programming Language Research</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=mailto:me@jr0.org target=_blank aria-label=Email rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/jakeroggenbuck target=_blank aria-label=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://linkedin.com/in/jakeroggenbuck target=_blank aria-label=Linkedin rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></span></a></div></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="min-w-0 min-h-0 max-w-fit"><div class="max-w-prose mb-20"><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/ad60c31a-ff64-47b0-b50f-2d161c9e9f96#gh-dark-mode-only alt=RedoxQL-darkmode></figure><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/8f38e31e-163a-4f49-aa43-34484ad361ed#gh-light-mode-only alt=RedoxQL-lightmode></figure></p><p>ðŸ¦€ RedoxQL is an L-Store database written in Rust and Python ðŸš€</p><p>ðŸ¥‡ Fastest database speed in the class for milestone 2 (ECS165A Winter 2025) âš¡</p><p><figure><img class="my-0 rounded-md" src="https://img.shields.io/badge/Rust-1A5D8A?style=for-the-badge&logo=rust&logoColor=white" alt=Rust></figure><figure><img class="my-0 rounded-md" src="https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=python&logoColor=white" alt=Python></figure></p><p>RedoxQL is our implementation of an <a href=https://openproceedings.org/2018/conf/edbt/paper-215.pdf target=_blank>L-Store</a> database.</p><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/bb1f9c7e-0d9a-4c52-8630-73990e0a7eea alt=image></figure></p><blockquote><p>[!IMPORTANT]
Read the Structure section â€” We use both Rust and Python and they go in different places</p></blockquote><div id=setup class=anchor></div><h2 class="relative group">Setup
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#setup aria-label=Anchor>#</a></span></h2><p>Create a virtual environment</p><pre tabindex=0><code>python3 -m venv venv
</code></pre><p>Source the virtual environment</p><pre tabindex=0><code>source venv/bin/activate
</code></pre><p>Install maturin</p><pre tabindex=0><code>pip install -r requirements.txt
</code></pre><div id=running class=anchor></div><h2 class="relative group">Running
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#running aria-label=Anchor>#</a></span></h2><p>Build the Rust code</p><pre tabindex=0><code>maturin build --release
</code></pre><p>Install the module (Note: the version will change so check the exact filename in <code>target/wheels/</code>)</p><pre tabindex=0><code>pip install target/wheels/lstore* --force-reinstall
</code></pre><p>Run the database benchmark</p><pre tabindex=0><code>python3 __main__.py
</code></pre><p>You should see this for milestone 1.</p><pre tabindex=0><code>(venv) ecs-165a-database (main) Î» p __main__.py
Inserting 10k records took:  			 0.0077650810000000035
Updating 10k records took:  			 0.020893269
Selecting 10k records took:  			 0.016048745000000003
Aggregate 10k of 100 record batch took:	 0.0039221569999999956
Deleting 10k records took:  			 0.002314741000000009
(venv) ecs-165a-database (main) Î»
</code></pre><div id=attribution class=anchor></div><h2 class="relative group">Attribution
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#attribution aria-label=Anchor>#</a></span></h2><ul><li>Keanu - Secondary indexes, page.rs and all the page stuff, index.rs and all of the index stuff</li><li>Lucas & Andrew - update</li><li>Lucas - Merge, select_version, sum_version, matching</li><li>Abdulrasol - Merge, BaseContainer, TailContainer, PageDirectory, insert into containers, RecordAddress and Record</li><li>Jake - Persistence, RTable, RDatabase, RQuery, new RIndex, python bindings, inserts and reads for all props</li></ul><div id=structure class=anchor></div><h2 class="relative group">Structure
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#structure aria-label=Anchor>#</a></span></h2><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/9b170cbd-1bbc-4966-870d-47a331bf2515 alt="RedoxQL system diagram"></figure></p><div id=file-structure class=anchor></div><h3 class="relative group">File Structure
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#file-structure aria-label=Anchor>#</a></span></h3><pre tabindex=0><code>.
â”œâ”€â”€ benches
â”‚Â Â  â””â”€â”€ db_benchmark.rs
â”œâ”€â”€ Cargo.lock
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ docs
â”‚Â Â  â””â”€â”€ old-system-diagrams.md
â”œâ”€â”€ LICENSE
â”œâ”€â”€ main_checking.py
â”œâ”€â”€ __main__.py
â”œâ”€â”€ Makefile
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ python
â”‚Â Â  â”œâ”€â”€ benchmarks
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ graph_scale.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ scaling_tester.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ simple_example.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ simple_tester.py
â”‚Â Â  â”‚Â Â  â””â”€â”€ speedtests.py
â”‚Â Â  â”œâ”€â”€ lstore
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ db.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ query.py
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ transaction.py
â”‚Â Â  â”‚Â Â  â””â”€â”€ transaction_worker.py
â”‚Â Â  â””â”€â”€ tests
â”‚Â Â      â”œâ”€â”€ __init__.py
â”‚Â Â      â””â”€â”€ test_main.py
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt
â””â”€â”€ src
    â”œâ”€â”€ container.rs
    â”œâ”€â”€ database.rs
    â”œâ”€â”€ index.rs
    â”œâ”€â”€ lib.rs
    â”œâ”€â”€ pagerange.rs
    â”œâ”€â”€ page.rs
    â”œâ”€â”€ query.rs
    â”œâ”€â”€ record.rs
    â”œâ”€â”€ system.rs
    â””â”€â”€ table.rs
</code></pre><div id=lstore class=anchor></div><h4 class="relative group">lstore
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#lstore aria-label=Anchor>#</a></span></h4><p>The lstore (<code>./lstore</code>) directory is where the Python code goes. This is what gets called by the tests in <code>__main__.py</code>. The lstore directory can be referred to as a Python module.</p><div id=src class=anchor></div><h4 class="relative group">src
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#src aria-label=Anchor>#</a></span></h4><p>The src (<code>./src</code>) directory is where the Rust code goes. This gets called by the code in the lstore module.</p><p><code>system.rs</code> - all the functions and structs related to getting information from the system machine
<code>database.rs</code> - the database struct and the related functions</p><div id=demo-project class=anchor></div><h2 class="relative group">Demo Project
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#demo-project aria-label=Anchor>#</a></span></h2><p>In the demo project, we made an API that uses our database to store grades. Here we are sending a PUT and then doing a GET.</p><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/f06156d7-c31b-4afb-ba7e-e5156deedac7 alt=image></figure></p><div id=results class=anchor></div><h2 class="relative group">Results
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#results aria-label=Anchor>#</a></span></h2><div id=milestone-1 class=anchor></div><h3 class="relative group">Milestone 1
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#milestone-1 aria-label=Anchor>#</a></span></h3><p>After a simple fix after we submitted, we were able to get everything working.</p><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/ddd1ac1a-daf4-46a2-b8ca-c970ee3b4321 alt=image></figure></p><div id=milestone-2 class=anchor></div><h3 class="relative group">Milestone 2
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#milestone-2 aria-label=Anchor>#</a></span></h3><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/89225788-885e-47ba-a618-fc92ed82d5a2 alt=image></figure></p><div id=milestone-3 class=anchor></div><h3 class="relative group">Milestone 3
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#milestone-3 aria-label=Anchor>#</a></span></h3><p><code>exam_tester_m3_part1.py</code> and <code>exam_tester_m3_part2.py</code></p><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/1f1ccc87-c9e6-430c-bbd9-099c54fbd20a alt=image></figure></p><p><code>m3_tester_part_1.py</code> and <code>m3_tester_part_2.py</code></p><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/03b8be78-b710-42ee-b572-48e470cdc6ab alt=image></figure></p><div id=use-in-python class=anchor></div><h2 class="relative group">Use in Python
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#use-in-python aria-label=Anchor>#</a></span></h2><p>This is a quickstart for how to use RedosQL as a library in Python. To follow along, run the <a href="https://github.com/JakeRoggenbuck/RedoxQL?tab=readme-ov-file#setup" target=_blank>setup instructions</a> and then you can write the following code.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=c1># Import the database class</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>lstore.db</span> <span class=kn>import</span> <span class=n>Database</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create an instance of the database</span>
</span></span><span class=line><span class=cl><span class=n>db</span> <span class=o>=</span> <span class=n>Database</span><span class=p>()</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=c1># Create a table in the database</span>
</span></span><span class=line><span class=cl><span class=c1># This table has 5 columns and the primary key is the 0th column</span>
</span></span><span class=line><span class=cl><span class=n>grades_table</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>create_table</span><span class=p>(</span><span class=s1>&#39;Grades&#39;</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=c1># Import the query</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>lstore.query</span> <span class=kn>import</span> <span class=n>Query</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=c1># Insert a row with the primary key 0 and 4 grades</span>
</span></span><span class=line><span class=cl><span class=n>query</span><span class=o>.</span><span class=n>insert</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>91</span><span class=p>,</span> <span class=mi>92</span><span class=p>,</span> <span class=mi>93</span><span class=p>,</span> <span class=mi>94</span><span class=p>])</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=c1># Update the 1st column in the database</span>
</span></span><span class=line><span class=cl><span class=n>query</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=p>[</span><span class=mi>90</span><span class=p>,</span> <span class=kc>None</span><span class=p>,</span> <span class=kc>None</span><span class=p>,</span> <span class=kc>None</span><span class=p>])</span>
</span></span></code></pre></div><div id=testing class=anchor></div><h2 class="relative group">Testing
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#testing aria-label=Anchor>#</a></span></h2><div id=rust-testing class=anchor></div><h3 class="relative group">Rust testing
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#rust-testing aria-label=Anchor>#</a></span></h3><pre tabindex=0><code>cargo test
</code></pre><p>Here is what the correct output should look like. You should see multiple tests passing.</p><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/b6aee0b5-571f-4450-9381-296efc5e2f73 alt=image></figure></p><div id=unit-tests class=anchor></div><h4 class="relative group">Unit Tests
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#unit-tests aria-label=Anchor>#</a></span></h4><p>Rust unit tests are located in each Rust file and can be found in <code>./src</code></p><div id=integration-tests class=anchor></div><h4 class="relative group">Integration Tests
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#integration-tests aria-label=Anchor>#</a></span></h4><p>The integration tests are located at <code>./tests</code> and are also run with <code>cargo test</code></p><div id=python-testing class=anchor></div><h3 class="relative group">Python testing
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#python-testing aria-label=Anchor>#</a></span></h3><pre tabindex=0><code>pytest
</code></pre><p>Python tests are located in a separate directory called <code>tests</code> located in <code>./python</code></p><div id=rust-docs class=anchor></div><h2 class="relative group">Rust Docs
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#rust-docs aria-label=Anchor>#</a></span></h2><p>Rust has a way of making docs from the source code. Run <code>cargo doc</code> and view the produced HTML page in your browser. Adding comments to your code starting with <code>///</code> will be put into these docs.</p><div id=speed-analysis class=anchor></div><h2 class="relative group">Speed Analysis
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#speed-analysis aria-label=Anchor>#</a></span></h2><div id=using-flamegraph-to-benchmark class=anchor></div><h3 class="relative group">Using flamegraph to benchmark
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#using-flamegraph-to-benchmark aria-label=Anchor>#</a></span></h3><p>You may need to install flamegraph with <code>cargo install flamegraph</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>cargo flamegraph --test update_tests
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Open the svg (It&#39;s nice to view in a browser)</span>
</span></span><span class=line><span class=cl>firefox flamegraph.svg
</span></span></code></pre></div><p>Preview:</p><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/ac866062-79f2-45e0-84ae-c81dceef68cc alt=image></figure></p><div id=running-cargo-benchmarks class=anchor></div><h3 class="relative group">Running cargo benchmarks
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#running-cargo-benchmarks aria-label=Anchor>#</a></span></h3><p>This will take a long time but you can run benchmarks separately.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>cargo bench
</span></span></code></pre></div><p>You can use <code>cargo bench</code> to see if your changes significantly affect performance.</p><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/367e1f7a-dd85-46ed-998a-939f95a1b561 alt=image></figure></p><p>Often small changes can happen randomly. Like this has no change in the code.
Try to run the bench as the only thing running on the system.</p><div id=using-maturin-in-release-mode class=anchor></div><h3 class="relative group">Using maturin in release mode
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#using-maturin-in-release-mode aria-label=Anchor>#</a></span></h3><p>Maturin is what builds our Python package. Maturin has a mode called <code>--release</code> that significantly improves the speed. This is because release mode runs Cargo in release mode, and this does all of the optimization tricks to speed up the executable as much as possible.</p><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/31b18374-11b6-42fd-8405-5f32a751804f alt=perf_chart></figure><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/8e638ec0-12f7-461f-b1e6-7823d98004cf alt=tests_chart></figure></p><p>Data for both graphs can be found <a href=./python/benchmarks/speedtests.py>here</a></p><div id=scaling-of-insert-operation class=anchor></div><h3 class="relative group">Scaling of Insert Operation
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#scaling-of-insert-operation aria-label=Anchor>#</a></span></h3><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/22cff07d-d7b0-4502-b559-635a22e38c77 alt=scaling></figure></p><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/e65ee6c3-7256-4cf1-8432-369cd6658eaf alt=update_scale></figure></p><div id=using-release-build-settings class=anchor></div><h3 class="relative group">Using release build settings
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#using-release-build-settings aria-label=Anchor>#</a></span></h3><p>With compiler options</p><pre tabindex=0><code>(venv) redoxql (main) Î» p __main__.py
Inserting 10k records took:                      0.006803145
Updating 10k records took:                       0.018702902999999996
Selecting 10k records took:                      0.016315803000000004
Aggregate 10k of 100 record batch took:  0.005981531999999998
Deleting 10k records took:                       0.002332115999999995
(venv) redoxql (main) Î» time p m1_tester.py
Insert finished

real    0m0.117s
user    0m0.106s
sys     0m0.010s
user    0m0.106s
sys     0m0.010s
(venv) redoxql (main) Î» time p exam_tester_m1.py
Insert finished

real    0m0.282s
user    0m0.272s
sys     0m0.010s
(venv) redoxql (main) Î»
</code></pre><p>Without compiler options</p><pre tabindex=0><code>(venv) redoxql (main) Î» p __main__.py
Inserting 10k records took:                      0.007401888000000002
Updating 10k records took:                       0.018957811999999997
Selecting 10k records took:                      0.015054888999999995
Aggregate 10k of 100 record batch took:  0.003300163000000002
Deleting 10k records took:                       0.002181812999999991
(venv) redoxql (main) Î» time p m1_tester.py
Insert finished

real    0m0.112s
user    0m0.108s
sys     0m0.004s
(venv) redoxql (main) Î» time p exam_tester_m1.py
Insert finished

real    0m0.268s
user    0m0.254s
sys     0m0.014s
</code></pre><div id=running-with-debug-or-info-logging class=anchor></div><h3 class="relative group">Running with debug or info logging
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#running-with-debug-or-info-logging aria-label=Anchor>#</a></span></h3><p>To use the logger, import the debug, error, or info macro from the log crate.
Then you can add the macros to code like <code>debug!("Start database!");</code>.
When you go to run the code, you can set the env var <code>RUST_LOG=debug</code>.
Docs: <a href=https://docs.rs/env_logger/latest/env_logger/ target=_blank>https://docs.rs/env_logger/latest/env_logger/</a>.</p><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/1fb2f55f-f21b-4b2d-8301-88e44e0a9260 alt=image></figure></p><div id=we-tried-pypy class=anchor></div><h3 class="relative group">We tried Pypy
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#we-tried-pypy aria-label=Anchor>#</a></span></h3><p>We started to try using Pypy which is a runtime for Python that is supposedly faster. Because of <a href=https://en.wikipedia.org/wiki/Amdahl%27s_law target=_blank>Amdahl&rsquo;s law</a>, we actually can&rsquo;t get all that much performance out of it. We also found that the newest version of Pypy cannot use the newest version of Pyo3, so future work is needed to get them to run together.</p><p>Future questions:</p><ul><li><input disabled type=checkbox> How much time does the Python part take up?</li><li><input checked disabled type=checkbox> How do we measure the improvement from Python to Pypy</li><li><input checked disabled type=checkbox> How do we downgrade Pypy to work with Py03</li></ul><p>We opted to go for C Python because it&rsquo;s much faster in this use case. We show the results of some tests <a href=./python/py-opt/cpython-vs-pypy.md>here</a>.</p><div id=profiling-python class=anchor></div><h3 class="relative group">Profiling Python
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#profiling-python aria-label=Anchor>#</a></span></h3><p>We use <code>py-spy</code> to profile Python and we got expected results. It shows that the main use of Python is just the update function when testM2.py is run.</p><p>Here is how we ran it:</p><pre tabindex=0><code>py-spy record -o profile.svg -- python3 testM2.py
</code></pre><p><a href=./profile.svg>profile</a></p><div id=moving-everything-possible-to-rust class=anchor></div><h3 class="relative group">Moving everything possible to Rust
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#moving-everything-possible-to-rust aria-label=Anchor>#</a></span></h3><p>We used to make a ReturnRecord object for every single row! We also would turn the result of rquery into a list, wrap each in ReturnRecord and then make that back into a new list. ReturnRecord would also do list truncation each time it was initialized (for each row). We moved all of this logic into Rust can simply return what the Rust function returns. This change improved the performance by nearly <strong>30%</strong>. The speed of testM2.py went from 1.30 seconds to 0.92 seconds. These results we consistent across 3 different runs each done in an interwoven fashion (with change, then without change, then with change again, etc.) for a total of 6 runs. The change can be seen in <a href=https://github.com/JakeRoggenbuck/ecs-165a-database/pull/162 target=_blank>PR#162</a>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl><span class=gd>-   class ReturnRecord:
</span></span></span><span class=line><span class=cl><span class=gd>-       def __init__(self, columns: List[int]):
</span></span></span><span class=line><span class=cl><span class=gd>-           self.columns = columns[4:]
</span></span></span><span class=line><span class=cl><span class=gd>-
</span></span></span><span class=line><span class=cl><span class=gd>-       def __str__(self):
</span></span></span><span class=line><span class=cl><span class=gd>-           return f&#34;Record({self.columns})&#34;
</span></span></span><span class=line><span class=cl><span class=gd></span>
</span></span><span class=line><span class=cl><span class=gd>-   return [
</span></span></span><span class=line><span class=cl><span class=gd>-       ReturnRecord(
</span></span></span><span class=line><span class=cl><span class=gd>-           list(
</span></span></span><span class=line><span class=cl><span class=gd>-               self.rquery.select_version(
</span></span></span><span class=line><span class=cl><span class=gd>-                   search_key,
</span></span></span><span class=line><span class=cl><span class=gd>-                   search_key_index,
</span></span></span><span class=line><span class=cl><span class=gd>-                   projected_columns_index,
</span></span></span><span class=line><span class=cl><span class=gd>-                   relative_version,
</span></span></span><span class=line><span class=cl><span class=gd>-               )
</span></span></span><span class=line><span class=cl><span class=gd>-           )
</span></span></span><span class=line><span class=cl><span class=gd>-       )
</span></span></span><span class=line><span class=cl><span class=gd>-   ]
</span></span></span><span class=line><span class=cl><span class=gd></span><span class=gi>+   return self.rquery.select_version(
</span></span></span><span class=line><span class=cl><span class=gi>+       search_key,
</span></span></span><span class=line><span class=cl><span class=gi>+       search_key_index,
</span></span></span><span class=line><span class=cl><span class=gi>+       projected_columns_index,
</span></span></span><span class=line><span class=cl><span class=gi>+       relative_version,
</span></span></span><span class=line><span class=cl><span class=gi>+   )
</span></span></span></code></pre></div><p>This includes <code>insert</code> and <code>update</code>.</p><div id=using-fxhashmap-instead-of-default-hashmap class=anchor></div><h3 class="relative group">Using FxHashMap instead of default HashMap
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#using-fxhashmap-instead-of-default-hashmap aria-label=Anchor>#</a></span></h3><p>The Rust default HashMap is a great general purpose HashMap implementation and is very fast but FxHashMap is a decent bit faster.
After changing the page directory to use FxHashMap in <a href=https://github.com/JakeRoggenbuck/ecs-165a-database/pull/186 target=_blank>PR#186</a>, the speed of many reads and writes improved by <strong>over 28%</strong> and the overall speed of all the benchmarks improved by <strong>over 26%</strong>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rs data-lang=rs><span class=line><span class=cl><span class=k>use</span><span class=w> </span><span class=k>crate</span>::<span class=n>container</span>::<span class=p>{</span><span class=n>ReservedColumns</span><span class=p>,</span><span class=w> </span><span class=n>NUM_RESERVED_COLUMNS</span><span class=p>};</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>use</span><span class=w> </span><span class=k>crate</span>::<span class=n>index</span>::<span class=n>RIndexHandle</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>use</span><span class=w> </span><span class=n>pyo3</span>::<span class=n>prelude</span>::<span class=o>*</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>use</span><span class=w> </span><span class=n>rustc_hash</span>::<span class=n>FxHashMap</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>use</span><span class=w> </span><span class=n>serde</span>::<span class=p>{</span><span class=n>Deserialize</span><span class=p>,</span><span class=w> </span><span class=n>Serialize</span><span class=p>};</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>collections</span>::<span class=n>HashMap</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>sync</span>::<span class=p>{</span><span class=n>Arc</span><span class=p>,</span><span class=w> </span><span class=n>Mutex</span><span class=p>,</span><span class=w> </span><span class=n>RwLock</span><span class=p>};</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>type</span> <span class=nc>RedoxQLHasher</span><span class=o>&lt;</span><span class=n>K</span><span class=p>,</span><span class=w> </span><span class=n>V</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>FxHashMap</span><span class=o>&lt;</span><span class=n>K</span><span class=p>,</span><span class=w> </span><span class=n>V</span><span class=o>&gt;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=cp>#[derive(Default, Clone, Serialize, Deserialize)]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>struct</span> <span class=nc>PageDirectoryMetadata</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>directory</span>: <span class=nc>HashMap</span><span class=o>&lt;</span><span class=kt>i64</span><span class=p>,</span><span class=w> </span><span class=n>RecordMetadata</span><span class=o>&gt;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>directory</span>: <span class=nc>RedoxQLHasher</span><span class=o>&lt;</span><span class=kt>i64</span><span class=p>,</span><span class=w> </span><span class=n>RecordMetadata</span><span class=o>&gt;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=cp>#[derive(Default, Clone)]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>struct</span> <span class=nc>PageDirectory</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>directory</span>: <span class=nc>HashMap</span><span class=o>&lt;</span><span class=kt>i64</span><span class=p>,</span><span class=w> </span><span class=n>Record</span><span class=o>&gt;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>directory</span>: <span class=nc>RedoxQLHasher</span><span class=o>&lt;</span><span class=kt>i64</span><span class=p>,</span><span class=w> </span><span class=n>Record</span><span class=o>&gt;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// -- snip --
</span></span></span></code></pre></div><div id=using-rust-compilation-flags class=anchor></div><h3 class="relative group">Using Rust compilation flags
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#using-rust-compilation-flags aria-label=Anchor>#</a></span></h3><p>You can set specific build flags that improve the optimization.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>profile</span><span class=p>.</span><span class=nx>release</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>lto</span> <span class=p>=</span> <span class=s2>&#34;fat&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>codegen-units</span> <span class=p>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=nx>opt-level</span> <span class=p>=</span> <span class=mi>3</span>
</span></span></code></pre></div><ul><li><p><code>lto = "fat"</code> is the max setting for &ldquo;Link time optimization&rdquo;, meaning that when it links the binary together, it does the maximum amount of optimizations.</p></li><li><p><code>codegen-units = 1</code> means that rustc will not split up the source code into different parts to compile separately on different threads. Because of this, it&rsquo;s able to apply optimization tricks like inlining between libraries and our project source code.</p></li><li><p><code>opt-level = 3</code> is just setting the optimization level. The reason you might want it lower is compilation speed.</p></li></ul><div id=using-snakeviz-to-profile class=anchor></div><h3 class="relative group">Using snakeviz to profile
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#using-snakeviz-to-profile aria-label=Anchor>#</a></span></h3><p>After reading bits from the O&rsquo;Reilly <em>High Performance Python, 3rd Edition</em>, I found out about profiling with snakeviz.</p><pre tabindex=0><code>pip install snakeviz
</code></pre><pre tabindex=0><code>python3 -m cProfile -o profile.prof testM2.py
</code></pre><pre tabindex=0><code>snakeviz profile.prof
</code></pre><p>Here is the output from <code>testM2.py</code></p><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/11d9fbd6-b2b5-47e4-a4e6-4ecd32cba678 alt=image></figure></p><div id=python-dis-library-and-bytecode class=anchor></div><h3 class="relative group">Python dis library and bytecode
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#python-dis-library-and-bytecode aria-label=Anchor>#</a></span></h3><p>Python gets parsed into bytecode and we can see it using the <a href=https://docs.python.org/3/library/dis.html target=_blank>dis</a> library. This can be useful to see what byte might be unneeded.</p><p><figure><img class="my-0 rounded-md" src=https://github.com/user-attachments/assets/5324d422-f21a-4484-9467-a247b202bd8a alt=image></figure></p><div id=speed-improvement-prs class=anchor></div><h3 class="relative group">Speed Improvement PRs
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#speed-improvement-prs aria-label=Anchor>#</a></span></h3><ul><li><a href=https://github.com/JakeRoggenbuck/RedoxQL/pull/186 target=_blank>Improve hashing speed for page directory by over 26%</a></li><li><a href=https://github.com/JakeRoggenbuck/RedoxQL/pull/191 target=_blank>~70% speed improvement with lazy select</a> (Not used because the API expects an iterable)</li><li><a href=https://github.com/JakeRoggenbuck/RedoxQL/pull/162 target=_blank>Move select return record logic all to Rust to achieve 30% speed improvement</a></li></ul></div></div><script>var oid="views_projects/RedoxQL.md",oid_likes="likes_projects/RedoxQL.md"</script><script type=text/javascript src=/js/page.min.0e49973b4ad0a382c7c6012d8bff8226316642daabc4f8a20477bd08674f3da6e2fa993bc20ad4f51e7c5bb68e6f913a207a7c4fe37ea0e7b806894afce0a64e.js integrity="sha512-DkmXO0rQo4LHxgEti/+CJjFmQtqrxPiiBHe9CGdPPabi+pk7wgrU9R58W7aOb5E6IHp8T+N+oOe4BolK/OCmTg=="></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/projects/ecs198f_hw1_template/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">ecs198f_hw1_template</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2025-01-12 00:00:00 +0000 UTC">12 January 2025</time></span></span></a></span>
<span><a class="flex text-right group ml-3" href=/projects/ecs198f_hw2_template/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">ecs198f_hw2_template</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2025-02-04 00:00:00 +0000 UTC">4 February 2025</time></span></span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2025
Jake Roggenbuck</p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.35c1113bcc16c5a59bf031082f9e63822aa95280423881a7847a7ff33a16e6299ce6a840d9ef4e10d947e030a18f3f20359afb2ec0f35967484b9a9360ac3145.js integrity="sha512-NcERO8wWxaWb8DEIL55jgiqpUoBCOIGnhHp/8zoW5imc5qhA2e9OENlH4DChjz8gNZr7LsDzWWdIS5qTYKwxRQ=="></script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>