<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><style>:root{--accent-color:#FF4D4D}</style><title>lark</title><meta name=description content="Software Developer & Student"><meta name=keywords content><meta property="og:url" content="https://jr0.org/projects/lark/"><meta property="og:type" content="website"><meta property="og:title" content="lark"><meta property="og:description" content="Software Developer & Student"><meta property="og:image" content="/images/35516367.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="lark"><meta name=twitter:description content="Software Developer & Student"><meta property="twitter:domain" content="https://jr0.org/projects/lark/"><meta property="twitter:url" content="https://jr0.org/projects/lark/"><meta name=twitter:image content="/images/35516367.jpg"><link rel=canonical href=https://jr0.org/projects/lark/><link rel=stylesheet type=text/css href=https://jr0.org/css/normalize.min.css media=print onload='this.media="all"'><link rel=stylesheet type=text/css href=https://jr0.org/css/main.css><link disabled id=dark-theme rel=stylesheet href=https://jr0.org/css/dark.css><script src=https://jr0.org/js/svg-injector.min.js></script>
<script src=https://jr0.org/js/feather-icons.min.js></script>
<script src=https://jr0.org/js/main.js></script></head><body><script type=text/javascript>setThemeByUserPref()</script><header class=header><nav class=header-nav><div class=avatar><a href=https://jr0.org><img src=https://jr0.org/images/35516367.jpg alt=avatar></a></div><div class=nav-title><a class=nav-brand href=https://jr0.org>JR0.org</a></div><div class=nav-links><div class=nav-link><a href=https://jr0.org/><span data-feather=home></span> Home</a></div><div class=nav-link><a href=https://jr0.org/projects/><span data-feather=code></span> Projects</a></div><div class=nav-link><a href=https://jr0.org/research/><span data-feather=book></span> Research</a></div><div class=nav-link><a href=https://jr0.org/devlogs/><span data-feather=book></span> Devlog</a></div><div class=nav-link><a href=https://github.com/jakeroggenbuck/JakeRoggenbuck.github.io><span data-feather=github></span></a></div><span class=nav-icons-divider></span><div class="nav-link dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only></span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></div><div class=nav-link id=hamburger-menu-toggle><span id=hamburger-menu-toggle-screen-reader-target class=sr-only>menu</span>
<a><span data-feather=menu></span></a></div><ul class="nav-hamburger-list visibility-hidden"><li class=nav-item><a href=https://jr0.org/><span data-feather=home></span> Home</a></li><li class=nav-item><a href=https://jr0.org/projects/><span data-feather=code></span> Projects</a></li><li class=nav-item><a href=https://jr0.org/research/><span data-feather=book></span> Research</a></li><li class=nav-item><a href=https://jr0.org/devlogs/><span data-feather=book></span> Devlog</a></li><li class=nav-item><a href=https://github.com/jakeroggenbuck/JakeRoggenbuck.github.io><span data-feather=github></span></a></li><li class="nav-item dark-theme-toggle"><span id=dark-theme-toggle-screen-reader-target class=sr-only>theme</span>
<a><span id=theme-toggle-icon data-feather=moon></span></a></li></ul></div></nav></header><main id=content><div class="post container"><div class=post-header-section><h1>lark</h1></div><div class=post-content><p><p><a href=https://github.com/jakeroggenbuck/lark/>See on GitHub</a></p><h1 id=lark---a-parsing-toolkit-for-python>Lark - a parsing toolkit for Python</h1><p>Lark is a parsing toolkit for Python, built with a focus on ergonomics, performance and modularity.</p><p>Lark can parse all context-free languages. To put it simply, it means that it is capable of parsing almost any programming language out there, and to some degree most natural languages too.</p><p><strong>Who is it for?</strong></p><ul><li><p><strong>Beginners</strong>: Lark is very friendly for experimentation. It can parse any grammar you throw at it, no matter how complicated or ambiguous, and do so efficiently. It also constructs an annotated parse-tree for you, using only the grammar and an input, and it gives you convienient and flexible tools to process that parse-tree.</p></li><li><p><strong>Experts</strong>: Lark implements both Earley(SPPF) and LALR(1), and several different lexers, so you can trade-off power and speed, according to your requirements. It also provides a variety of sophisticated features and utilities.</p></li></ul><p><strong>What can it do?</strong></p><ul><li>Parse all context-free grammars, and handle any ambiguity gracefully</li><li>Build an annotated parse-tree automagically, no construction code required.</li><li>Provide first-rate performance in terms of both Big-O complexity and measured run-time (considering that this is Python ;)</li><li>Run on every Python interpreter (it&rsquo;s pure-python)</li><li>Generate a stand-alone parser (for LALR(1) grammars)</li></ul><p>And many more features. Read ahead and find out!</p><p>Most importantly, Lark will save you time and prevent you from getting parsing headaches.</p><h3 id=quick-links>Quick links</h3><ul><li><a href=https://lark-parser.readthedocs.io/>Documentation @readthedocs</a></li><li><a href=/docs/_static/lark_cheatsheet.pdf>Cheatsheet (PDF)</a></li><li><a href=https://lark-parser.org/ide>Online IDE</a></li><li><a href=/docs/json_tutorial.md>Tutorial</a> for writing a JSON parser.</li><li>Blog post: <a href=http://blog.erezsh.com/how-to-write-a-dsl-in-python-with-lark/>How to write a DSL with Lark</a></li><li><a href=https://gitter.im/lark-parser/Lobby>Gitter chat</a></li></ul><h3 id=install-lark>Install Lark</h3><pre><code>$ pip install lark --upgrade
</code></pre><p>Lark has no dependencies.</p><p><a href=https://github.com/lark-parser/lark/actions/workflows/tests.yml><img src=https://github.com/lark-parser/lark/actions/workflows/tests.yml/badge.svg alt=Tests></a></p><h3 id=syntax-highlighting>Syntax Highlighting</h3><p>Lark provides syntax highlighting for its grammar files (*.lark):</p><ul><li><a href=https://github.com/lark-parser/lark_syntax>Sublime Text & TextMate</a></li><li><a href=https://github.com/lark-parser/vscode-lark>vscode</a></li><li><a href=https://github.com/lark-parser/intellij-syntax-highlighting>Intellij & PyCharm</a></li><li><a href=https://github.com/lark-parser/vim-lark-syntax>Vim</a></li><li><a href=https://github.com/Alhadis/language-grammars>Atom</a></li></ul><h3 id=clones>Clones</h3><p>These are implementations of Lark in other languages. They accept Lark grammars, and provide similar utilities.</p><ul><li><a href=https://github.com/jamesrhester/Lerche.jl>Lerche (Julia)</a> - an unofficial clone, written entirely in Julia.</li><li><a href=https://github.com/lark-parser/lark.js>Lark.js (Javascript)</a> - a port of the stand-alone LALR(1) parser generator to Javascsript.</li></ul><h3 id=hello-world>Hello World</h3><p>Here is a little program to parse &ldquo;Hello, World!&rdquo; (Or any other similar phrase):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> lark <span style=color:#f92672>import</span> Lark
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>l <span style=color:#f92672>=</span> Lark(<span style=color:#e6db74>&#39;&#39;&#39;start: WORD &#34;,&#34; WORD &#34;!&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            </span><span style=color:#e6db74>%i</span><span style=color:#e6db74>mport common.WORD   // imports from terminal library
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            </span><span style=color:#e6db74>%i</span><span style=color:#e6db74>gnore &#34; &#34;           // Disregard spaces in text
</span></span></span><span style=display:flex><span><span style=color:#e6db74>         &#39;&#39;&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print( l<span style=color:#f92672>.</span>parse(<span style=color:#e6db74>&#34;Hello, World!&#34;</span>) )
</span></span></code></pre></div><p>And the output is:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>Tree(start, [Token(WORD, <span style=color:#e6db74>&#39;Hello&#39;</span>), Token(WORD, <span style=color:#e6db74>&#39;World&#39;</span>)])
</span></span></code></pre></div><p>Notice punctuation doesn&rsquo;t appear in the resulting tree. It&rsquo;s automatically filtered away by Lark.</p><h3 id=fruit-flies-like-bananas>Fruit flies like bananas</h3><p>Lark is great at handling ambiguity. Here is the result of parsing the phrase &ldquo;fruit flies like bananas&rdquo;:</p><p><img src=examples/fruitflies.png alt=fruitflies.png></p><p><a href=https://github.com/lark-parser/lark/tree/master/examples/fruitflies.py>Read the code here</a>, and see <a href=https://lark-parser.readthedocs.io/en/latest/examples/index.html>more examples here</a>.</p><h2 id=list-of-main-features>List of main features</h2><ul><li>Builds a parse-tree (AST) automagically, based on the structure of the grammar</li><li><strong>Earley</strong> parser<ul><li>Can parse all context-free grammars</li><li>Full support for ambiguous grammars</li></ul></li><li><strong>LALR(1)</strong> parser<ul><li>Fast and light, competitive with PLY</li><li>Can generate a stand-alone parser (<a href=docs/tools.md#stand-alone-parser>read more</a>)</li></ul></li><li><strong>EBNF</strong> grammar</li><li><strong>Unicode</strong> fully supported</li><li>Automatic line & column tracking</li><li>Interactive parser for advanced parsing flows and debugging</li><li>Grammar composition - Import terminals and rules from other grammars</li><li>Standard library of terminals (strings, numbers, names, etc.)</li><li>Import grammars from Nearley.js (<a href=/docs/tools.md#importing-grammars-from-nearleyjs>read more</a>)</li><li>Extensive test suite <a href=https://codecov.io/gh/lark-parser/lark><img src="https://codecov.io/gh/lark-parser/lark/branch/master/graph/badge.svg?token=lPxgVhCVPK" alt=codecov></a></li><li>Type annotations (MyPy support)</li><li>And much more!</li></ul><p>See the full list of <a href=https://lark-parser.readthedocs.io/en/latest/features.html>features here</a></p><h3 id=comparison-to-other-libraries>Comparison to other libraries</h3><h4 id=performance-comparison>Performance comparison</h4><p>Lark is fast and light (lower is better)</p><p><img src=docs/_static/comparison_runtime.png alt="Run-time Comparison"></p><p><img src=docs/_static/comparison_memory.png alt="Memory Usage Comparison"></p><p>Check out the <a href=/docs/json_tutorial.md#conclusion>JSON tutorial</a> for more details on how the comparison was made.</p><p>For a more thorough and objective comparison, checkout the <a href=https://github.com/goodmami/python-parsing-benchmarks>Python Parsing Benchmarks</a> repo.</p><h4 id=feature-comparison>Feature comparison</h4><table><thead><tr><th style=text-align:left>Library</th><th style=text-align:left>Algorithm</th><th style=text-align:left>Grammar</th><th style=text-align:left>Builds tree?</th><th style=text-align:left>Supports ambiguity?</th><th style=text-align:left>Can handle every CFG?</th><th style=text-align:left>Line/Column tracking</th><th style=text-align:left>Generates Stand-alone</th></tr></thead><tbody><tr><td style=text-align:left><strong>Lark</strong></td><td style=text-align:left>Earley/LALR(1)</td><td style=text-align:left>EBNF</td><td style=text-align:left>Yes!</td><td style=text-align:left>Yes!</td><td style=text-align:left>Yes!</td><td style=text-align:left>Yes!</td><td style=text-align:left>Yes! (LALR only)</td></tr><tr><td style=text-align:left><a href=http://www.dabeaz.com/ply/>PLY</a></td><td style=text-align:left>LALR(1)</td><td style=text-align:left>BNF</td><td style=text-align:left>No</td><td style=text-align:left>No</td><td style=text-align:left>No</td><td style=text-align:left>No</td><td style=text-align:left>No</td></tr><tr><td style=text-align:left><a href=https://github.com/pyparsing/pyparsing>PyParsing</a></td><td style=text-align:left>PEG</td><td style=text-align:left>Combinators</td><td style=text-align:left>No</td><td style=text-align:left>No</td><td style=text-align:left>No*</td><td style=text-align:left>No</td><td style=text-align:left>No</td></tr><tr><td style=text-align:left><a href=https://pypi.python.org/pypi/Parsley>Parsley</a></td><td style=text-align:left>PEG</td><td style=text-align:left>EBNF</td><td style=text-align:left>No</td><td style=text-align:left>No</td><td style=text-align:left>No*</td><td style=text-align:left>No</td><td style=text-align:left>No</td></tr><tr><td style=text-align:left><a href=https://github.com/erikrose/parsimonious>Parsimonious</a></td><td style=text-align:left>PEG</td><td style=text-align:left>EBNF</td><td style=text-align:left>Yes</td><td style=text-align:left>No</td><td style=text-align:left>No*</td><td style=text-align:left>No</td><td style=text-align:left>No</td></tr><tr><td style=text-align:left><a href=https://github.com/antlr/antlr4>ANTLR</a></td><td style=text-align:left>LL(*)</td><td style=text-align:left>EBNF</td><td style=text-align:left>Yes</td><td style=text-align:left>No</td><td style=text-align:left>Yes?</td><td style=text-align:left>Yes</td><td style=text-align:left>No</td></tr></tbody></table><p>(* <em>PEGs cannot handle non-deterministic grammars. Also, according to Wikipedia, it remains unanswered whether PEGs can really parse all deterministic CFGs</em>)</p><h3 id=projects-using-lark>Projects using Lark</h3><ul><li><a href=https://github.com/python-poetry/poetry-core>Poetry</a> - A utility for dependency management and packaging</li><li><a href=https://github.com/dailymotion/tartiflette>tartiflette</a> - a GraphQL server by Dailymotion</li><li><a href=https://github.com/rigetti/pyquil>PyQuil</a> - Python library for quantum programming using Quil</li><li><a href=https://github.com/erezsh/preql>Preql</a> - An interpreted relational query language that compiles to SQL</li><li><a href=https://github.com/HypothesisWorks/hypothesis>Hypothesis</a> - Library for property-based testing</li><li><a href=https://github.com/geographika/mappyfile>mappyfile</a> - a MapFile parser for working with MapServer configuration</li><li><a href=https://github.com/vertexproject/synapse>synapse</a> - an intelligence analysis platform</li><li><a href=https://github.com/opendatacube/datacube-core>Datacube-core</a> - Open Data Cube analyses continental scale Earth Observation data through time</li><li><a href=https://github.com/SPFlow/SPFlow>SPFlow</a> - Library for Sum-Product Networks</li><li><a href=https://github.com/aiqm/torchani>Torchani</a> - Accurate Neural Network Potential on PyTorch</li><li><a href=https://github.com/simon816/Command-Block-Assembly>Command-Block-Assembly</a> - An assembly language, and C compiler, for Minecraft commands</li><li><a href=https://github.com/endgameinc/eql>EQL</a> - Event Query Language</li><li><a href=https://github.com/hyperledger/fabric-sdk-py>Fabric-SDK-Py</a> - Hyperledger fabric SDK with Python 3.x</li><li><a href=https://github.com/shezadkhan137/required>required</a> - multi-field validation using docstrings</li><li><a href=https://github.com/chanzuckerberg/miniwdl>miniwdl</a> - A static analysis toolkit for the Workflow Description Language</li><li><a href=https://gitlab.com/parmenti/pytreeview>pytreeview</a> - a lightweight tree-based grammar explorer</li><li><a href=https://github.com/napulen/harmalysis>harmalysis</a> - A language for harmonic analysis and music theory</li><li><a href=https://github.com/BlankSpruce/gersemi>gersemi</a> - A CMake code formatter</li><li><a href=https://github.com/evinism/mistql>MistQL</a> - A query language for JSON-like structures</li></ul><p><a href="https://github.com/lark-parser/lark/network/dependents?package_id=UGFja2FnZS01MjI1OTE0NQ%3D%3D">Full list</a></p><h2 id=license>License</h2><p>Lark uses the <a href=LICENSE>MIT license</a>.</p><p>(The standalone tool is under MPL2)</p><h2 id=contributors>Contributors</h2><p>Lark accepts pull-requests. See <a href=/docs/how_to_develop.md>How to develop Lark</a></p><p>Big thanks to everyone who contributed so far:</p><h2 id=sponsor>Sponsor</h2><p>If you like Lark, and want to see us grow, please consider <a href=https://github.com/sponsors/lark-parser>sponsoring us!</a></p><h2 id=contact-the-author>Contact the author</h2><p>Questions about code are best asked on <a href=https://gitter.im/lark-parser/Lobby>gitter</a> or in the issues.</p><p>For anything else, I can be reached by email at erezshin at gmail com.</p><p>&ndash; <a href=https://github.com/erezsh>Erez</a></p></p></div></div></main><footer class=footer><span>&copy; 2022 Jake Roggenbuck</span>
<span>Made with &#10084;&#65039; using <a target=_blank href=https://github.com/526avijitgupta/gokarna>Gokarna</a></span></footer></body></html>